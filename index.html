<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Weihnachtsr√§tsel üéÑ</title>

  <style>
    :root{
      --bg1:#070b16;
      --bg2:#0e1a36;
      --card: rgba(255,255,255,.07);
      --border: rgba(255,255,255,.12);
      --text:#f2f5ff;
      --muted:#c6d0ff;
      --gold:#ffcc66;
      --good:#4fe18f;
      --bad:#ff6b6b;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      min-height:100svh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      background:
        radial-gradient(900px 600px at 15% 10%, #213a7a 0%, transparent 60%),
        radial-gradient(900px 600px at 90% 30%, #5a2e6d 0%, transparent 55%),
        linear-gradient(160deg, var(--bg2), var(--bg1));
      overflow:hidden;
    }

    /* Schneefall Canvas */
    #snow{
      position:fixed;
      inset:0;
      width:100%;
      height:100%;
      z-index:0;
      pointer-events:none;
      opacity:.9;
    }

    .wrap{width:min(980px, 100%); z-index:1; position:relative;}
    .card{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 22px;
      padding: 26px;
      box-shadow: 0 30px 90px rgba(0,0,0,.45);
      backdrop-filter: blur(10px);
    }

    .top{
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
      margin-bottom: 14px;
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:10px 14px;
      border-radius:999px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.12);
      color: var(--muted);
      font-size: 14px;
    }

    .musicBtn{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:10px 14px;
      border-radius:999px;
      background: rgba(255,204,102,.16);
      border:1px solid rgba(255,255,255,.14);
      color: var(--text);
      cursor:pointer;
      font-weight:700;
      user-select:none;
    }
    .musicBtn:hover{ background: rgba(255,204,102,.22); }

    .title{
      font-size: 34px;
      margin: 10px 0 6px;
      letter-spacing:.2px;
    }
    .subtitle{
      margin:0 0 18px;
      color: var(--muted);
      font-size: 16px;
      line-height: 1.5;
    }

    .riddle{
      background: rgba(0,0,0,.20);
      border:1px solid rgba(255,255,255,.12);
      border-radius: 16px;
      padding: 18px;
      font-size: 20px;
      line-height: 1.65;
    }

    .row{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      margin-top: 14px;
    }
    input{
      flex: 1 1 280px;
      padding: 14px 14px;
      font-size: 18px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.08);
      color: var(--text);
      outline:none;
    }
    input:focus{
      border-color: rgba(255,204,102,.55);
      box-shadow: 0 0 0 4px rgba(255,204,102,.12);
    }

    button{
      padding: 14px 16px;
      font-size: 18px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,204,102,.18);
      color: var(--text);
      font-weight: 800;
      cursor:pointer;
    }
    button:hover{background: rgba(255,204,102,.25);}

    .msg{
      margin-top: 10px;
      min-height: 22px;
      font-size: 16px;
      color: var(--muted);
    }
    .msg.good{color: var(--good);}
    .msg.bad{color: var(--bad);}

    .hidden{display:none;}

    .divider{
      height:1px;
      background: rgba(255,255,255,.12);
      margin: 18px 0;
    }

    .giftBox{
      background: rgba(0,0,0,.22);
      border:1px solid rgba(255,255,255,.12);
      border-radius: 18px;
      padding: 18px;
      font-size: 18px;
      line-height: 1.6;
    }

    .voucherCard{
      border-radius:18px;
      padding:18px;
      border:1px dashed rgba(255,204,102,.55);
      background: linear-gradient(180deg, rgba(255,204,102,.10), rgba(0,0,0,.18));
      margin-top: 10px;
    }
    .big{
      font-size: 42px;
      margin: 10px 0 6px;
    }
    .stamp{
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.08);
      color: var(--muted);
      font-size: 13px;
      margin-top: 8px;
    }
    .lines p{ margin:10px 0; }
    .fill{
      display:inline-block;
      min-width: 240px;
      border-bottom: 2px solid rgba(255,255,255,.22);
      transform: translateY(-2px);
    }
  </style>
</head>

<body>
  <canvas id="snow"></canvas>

  <!-- Musik (Datei muss im gleichen Ordner liegen!) -->
  <audio id="music" src="weihnachtsmusik.mp3" loop preload="auto"></audio>

  <div class="wrap">
    <div class="card">

      <div class="top">
        <div class="badge">üéÑ Weihnachtsr√§tsel ‚Ä¢ <span id="levelLabel">Level 1/3</span></div>
        <div class="musicBtn" id="musicBtn">üé∂ Musik: Aus</div>
      </div>

      <!-- LEVEL 1 -->
      <section id="level1">
        <h1 class="title">Level 1</h1>
        <p class="subtitle">L√∂se das R√§tsel und √∂ffne den n√§chsten Schritt.</p>

        <div class="riddle">
          <strong>R√§tsel 1</strong><br><br>
          Ich bin ein Wunder der Natur,<br>
          bekannt als fl√ºssiges Gold.<br>
          In Kammern aufbewahrt<br>
          und von W√§chtern bewacht.
        </div>

        <div class="row">
          <input id="answer1" autocomplete="off" placeholder="Deine Antwort‚Ä¶" />
          <button id="btn1">Pr√ºfen</button>
        </div>
        <div id="msg1" class="msg"></div>
      </section>

      <!-- LEVEL 2 -->
      <section id="level2" class="hidden">
        <h1 class="title">Level 2</h1>
        <p class="subtitle">Sehr gut‚Ä¶ weiter geht‚Äôs ‚ú®</p>

        <div class="riddle">
          <strong>R√§tsel 2</strong><br><br>
          Ich spende Licht ohne Sonne,<br>
          lebe vom Opfer meiner selbst.<br>
          Je mehr ich gebe,<br>
          desto weniger werde ich.
        </div>

        <div class="row">
          <input id="answer2" autocomplete="off" placeholder="Deine Antwort‚Ä¶" />
          <button id="btn2">Pr√ºfen</button>
        </div>
        <div id="msg2" class="msg"></div>
      </section>

      <!-- LEVEL 3 -->
      <section id="level3" class="hidden">
        <h1 class="title">Level 3</h1>
        <p class="subtitle">Letzter Schritt‚Ä¶ du bist kurz vorm Ziel üéÅ</p>

        <div class="riddle">
          <strong>R√§tsel 3</strong><br><br>
          Ich kann rennen, ohne Beine.<br>
          Ich kann fliegen, ohne Fl√ºgel.<br>
          Ich kann heilen, bin aber keine Medizin<br>
          Was bin ich?
        </div>

        <div class="row">
          <input id="answer3" autocomplete="off" placeholder="Deine Antwort‚Ä¶" />
          <button id="btn3">Pr√ºfen</button>
        </div>
        <div id="msg3" class="msg"></div>
      </section>

      <!-- GUTSCHEIN -->
      <section id="gift" class="hidden">
        <h1 class="title">Du hast es geschafft! üéâ</h1>
        <p class="subtitle">Frohe Weihnachten! Hier ist dein Gutschein:</p>

        <div class="giftBox">
          <div class="big">üéÅ Selfcare-Gutschein</div>
          <div class="voucherCard lines">
            <p><strong>Inhalt:</strong> <span class="fill">Selfcare Gutschein</span></p>
            <p><strong>Einl√∂sbar bis:</strong> <span class="fill">24.12.2026</span></p>
            <p><strong>Von:</strong> <span class="fill">Yannik</span> &nbsp;&nbsp; <strong>F√ºr:</strong> <span class="fill">Melanie Weber-Haupenthal</span></p>
            <p><strong>Hinweis:</strong> <span class="fill">Dein echtes Geschenk liegt: Unterm Weihnachtsbaum</span></p>
            <div class="stamp">‚ú® Nur f√ºr dich ‚ú®</div>
          </div>
        </div>

        <div class="divider"></div>
        <button id="restart">Nochmal spielen</button>
      </section>

    </div>
  </div>

  <script>
    // ‚úÖ L√ñSUNGEN (einfach √§ndern)
    const LOESUNG1 = "Honig";
    const LOESUNG2 = "Kerze";
    const LOESUNG3 = "Zeit"; 
    const levelLabel = document.getElementById("levelLabel");
    const level1 = document.getElementById("level1");
    const level2 = document.getElementById("level2");
    const level3 = document.getElementById("level3");
    const gift   = document.getElementById("gift");

    const a1 = document.getElementById("answer1");
    const a2 = document.getElementById("answer2");
    const a3 = document.getElementById("answer3");

    const msg1 = document.getElementById("msg1");
    const msg2 = document.getElementById("msg2");
    const msg3 = document.getElementById("msg3");

    function norm(s){
      return (s || "")
        .trim()
        .toLowerCase()
        .replaceAll("√§","ae").replaceAll("√∂","oe").replaceAll("√º","ue").replaceAll("√ü","ss")
        .replaceAll(" ", "").replaceAll("-", "");
    }

    function show(section){
      [level1, level2, level3, gift].forEach(x => x.classList.add("hidden"));
      section.classList.remove("hidden");
      if(section === level1) levelLabel.textContent = "Level 1/3";
      if(section === level2) levelLabel.textContent = "Level 2/3";
      if(section === level3) levelLabel.textContent = "Level 3/3";
      if(section === gift)   levelLabel.textContent = "Geschafft!";
      window.scrollTo({top:0, behavior:"smooth"});
    }

    function ok(el, text){ el.className="msg good"; el.textContent=text; }
    function bad(el, text){ el.className="msg bad"; el.textContent=text; }

    document.getElementById("btn1").addEventListener("click", () => {
      if(norm(a1.value) === norm(LOESUNG1)){
        ok(msg1, "Richtig! üéâ Weiter zu Level 2‚Ä¶");
        setTimeout(()=>show(level2), 650);
      } else {
        bad(msg1, "Noch nicht üòä Tipp: s√º√ü.");
      }
    });

    document.getElementById("btn2").addEventListener("click", () => {
      if(norm(a2.value) === norm(LOESUNG2)){
        ok(msg2, "Sehr gut! ‚ú® Weiter zu Level 3‚Ä¶");
        setTimeout(()=>show(level3), 650);
      } else {
        bad(msg2, "Fast üòÑ Tipp: weihnachtliches Licht.");
      }
    });

    document.getElementById("btn3").addEventListener("click", () => {
      if(norm(a3.value) === norm(LOESUNG3)){
        ok(msg3, "Yes! üéÅ Gutschein wird ge√∂ffnet‚Ä¶");
        setTimeout(()=>show(gift), 650);
      } else {
        bad(msg3, "Nicht ganz üòâ Tipp: Das Leben ist... begrenzt.");
      }
    });

    // Enter-Taste
    a1.addEventListener("keydown", e => { if(e.key==="Enter") document.getElementById("btn1").click(); });
    a2.addEventListener("keydown", e => { if(e.key==="Enter") document.getElementById("btn2").click(); });
    a3.addEventListener("keydown", e => { if(e.key==="Enter") document.getElementById("btn3").click(); });

    document.getElementById("restart").addEventListener("click", () => {
      [a1,a2,a3].forEach(x => x.value="");
      [msg1,msg2,msg3].forEach(x => { x.textContent=""; x.className="msg"; });
      show(level1);
    });

    show(level1);

    // üé∂ Musik Toggle
    const music = document.getElementById("music");
    const musicBtn = document.getElementById("musicBtn");
    let musicOn = false;

    musicBtn.addEventListener("click", async () => {
      try{
        if(!musicOn){
          await music.play();
          musicOn = true;
          musicBtn.textContent = "üé∂ Musik: An";
        } else {
          music.pause();
          musicOn = false;
          musicBtn.textContent = "üé∂ Musik: Aus";
        }
      } catch (e){
        alert("Musik konnte nicht gestartet werden. Liegt 'weihnachtsmusik.mp3' im selben Ordner wie die HTML-Datei?");
      }
    });

    // ‚ùÑÔ∏è Schneefall (Canvas)
    const canvas = document.getElementById("snow");
    const ctx = canvas.getContext("2d");
    let w, h, flakes;

    function resize(){
      w = canvas.width = window.innerWidth * devicePixelRatio;
      h = canvas.height = window.innerHeight * devicePixelRatio;
      ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
      flakes = Array.from({length: 140}, () => newFlake(true));
    }

    function newFlake(randomY=false){
      return {
        x: Math.random()*window.innerWidth,
        y: randomY ? Math.random()*window.innerHeight : -10,
        r: 1 + Math.random()*3.2,
        s: 0.6 + Math.random()*1.6,
        dx: (Math.random()-0.5)*0.8
      };
    }

    function tick(){
      ctx.clearRect(0,0,window.innerWidth, window.innerHeight);
      ctx.globalAlpha = 0.9;
      ctx.fillStyle = "white";

      for(let i=0;i<flakes.length;i++){
        const f = flakes[i];
        f.y += f.s;
        f.x += f.dx;

        // leichte Drift
        f.dx += (Math.random()-0.5)*0.02;
        f.dx = Math.max(-1.2, Math.min(1.2, f.dx));

        // zeichnen
        ctx.beginPath();
        ctx.arc(f.x, f.y, f.r, 0, Math.PI*2);
        ctx.fill();

        // reset
        if(f.y > window.innerHeight + 10){
          flakes[i] = newFlake(false);
          flakes[i].y = -10;
        }
        if(f.x < -20) f.x = window.innerWidth + 20;
        if(f.x > window.innerWidth + 20) f.x = -20;
      }

      requestAnimationFrame(tick);
    }

    window.addEventListener("resize", resize);
    resize();
    tick();
  </script>
</body>
</html>